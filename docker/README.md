# Docker Setup –¥–ª—è BP2026

–¶–µ–π Docker setup –º—ñ—Å—Ç–∏—Ç—å –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è –∑–∞–ø—É—Å–∫—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó —Ç–∞ –≤—ñ–∑—É–∞–ª—å–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏ —Å–∞–π—Ç—É.

## –©–æ –≤–∫–ª—é—á–µ–Ω–æ

- ‚úÖ Backend (FastAPI) - `app.py` —Ç–∞ `src/rag/ask_cli.py`
- ‚úÖ Frontend (UI) - –ø–∞–ø–∫–∞ `ui/` –∑ HTML, CSS —Ç–∞ JS
- ‚úÖ Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `requirements.txt`
- ‚úÖ RAG index (`rag_index/faiss_e5/`)
- ‚úÖ URL mapping (`urls.txt`)

## –©–æ –≤–∏–∫–ª—é—á–µ–Ω–æ

- ‚ùå `.venv/` - –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ)
- ‚ùå `data_raw/` - —Å–∏—Ä—ñ –¥–∞–Ω—ñ (–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è runtime)
- ‚ùå `data_processed/` - –æ–±—Ä–æ–±–ª–µ–Ω—ñ –¥–∞–Ω—ñ (–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —è–∫—â–æ —ñ–Ω–¥–µ–∫—Å –≤–∂–µ –∑–±—É–¥–æ–≤–∞–Ω–∏–π)
- ‚ùå `src/ingest/` - —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö
- ‚ùå `scripts/` - bootstrap —Å–∫—Ä–∏–ø—Ç–∏
- ‚ùå `api_keys.env` - –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# –ó –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É
bash docker/start.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å –Ω–∞—è–≤–Ω—ñ—Å—Ç—å Docker
- –°—Ç–≤–æ—Ä–∏—Ç—å —à–∞–±–ª–æ–Ω `.env` —Ñ–∞–π–ª—É (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- –ü–æ–±—É–¥—É—î Docker –æ–±—Ä–∞–∑
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### –û–∫—Ä–µ–º—ñ –∑–±—ñ—Ä–∫–∏ Backend —Ç–∞ Frontend

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –±—ñ–ª–¥–∏—Ç–∏ –æ–∫—Ä–µ–º–æ:

```bash
# –¢—ñ–ª—å–∫–∏ backend (—è–∫—â–æ –∑–º—ñ–Ω–∏–ª–∏ Python –∫–æ–¥)
bash docker/build-backend.sh

# –¢—ñ–ª—å–∫–∏ frontend (—è–∫—â–æ –∑–º—ñ–Ω–∏–ª–∏ HTML/CSS/JS)
bash docker/build-frontend.sh

# –í—Å–µ —Ä–∞–∑–æ–º
bash docker/build-all.sh
```

üìñ **–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è**: `docker/BUILD_GUIDE.md`

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫

#### 1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø—Ü—ñ `docker/` –∑ –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏:

```env
ANTHROPIC_API_KEY=your_key_here
# –∞–±–æ
OPENAI_API_KEY=your_key_here

# –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
OPENAI_MODEL=gpt-4o-mini
EMBED_MODEL=intfloat/multilingual-e5-small
```

#### 2. –ü–æ–±—É–¥—É–π—Ç–µ —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å:

```bash
cd docker
docker-compose build
docker-compose up -d
```

–ê–±–æ –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó:

```bash
docker build -f docker/Dockerfile -t bp2026:latest .
docker run -d --name bp2026-app -p 8000:8000 --env-file docker/.env bp2026:latest
```

### 3. –ó–∞–ø—É—Å–∫ –±–µ–∑ docker-compose

```bash
docker run -d \
  --name bp2026-app \
  -p 8000:8000 \
  -e ANTHROPIC_API_KEY=your_key_here \
  -e ANTHROPIC_MODEL=claude-3-5-sonnet-20241022 \
  -v $(pwd)/rag_index:/app/rag_index:ro \
  bp2026:latest
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
- http://localhost:8000 - –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
- http://localhost:8000/docs - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –ó—É–ø–∏–Ω–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
bash docker/stop.sh
```

–ê–±–æ –≤—Ä—É—á–Ω—É:

```bash
cd docker
docker-compose down
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
docker/
‚îú‚îÄ‚îÄ Dockerfile          # –û—Å–Ω–æ–≤–Ω–∏–π Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml  # Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ README.md          # –¶—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

# .dockerignore –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É (–ø–æ—Ä—É—á –∑ docker/)
```

## –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏

1. **RAG Index**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `rag_index/faiss_e5/` –º—ñ—Å—Ç–∏—Ç—å –∑–±—É–¥–æ–≤–∞–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

2. **API –ö–ª—é—á—ñ**: –û–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–µ—Ä–µ–¥–∞–π—Ç–µ API –∫–ª—é—á—ñ —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞. –ù–ï –≤–∫–ª—é—á–∞–π—Ç–µ `api_keys.env` –≤ –æ–±—Ä–∞–∑.

3. **Volumes**: RAG index –º–æ–Ω—Ç—É—î—Ç—å—Å—è —è–∫ read-only volume –¥–ª—è –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑ –ø–µ—Ä–µ–±—É–¥–æ–≤–∏ –æ–±—Ä–∞–∑—É.

4. **–ü–æ—Ä—Ç–∏**: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø–æ—Ä—Ç 8000. –ó–º—ñ–Ω—ñ—Ç—å –≤ `docker-compose.yml` —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

## Troubleshooting

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ RAG index —ñ—Å–Ω—É—î: `ls -la rag_index/faiss_e5/`

### –ü–æ–º–∏–ª–∫–∏ –∑ API –∫–ª—é—á–∞–º–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω—ñ
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ API –∫–ª—é—á—ñ –≤–∞–ª—ñ–¥–Ω—ñ

### –ü–æ–º–∏–ª–∫–∏ –∑ –º–æ–¥–µ–ª–ª—é
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–∑–≤—É –º–æ–¥–µ–ª—ñ –≤ –∑–º—ñ–Ω–Ω—ñ–π `ANTHROPIC_MODEL` –∞–±–æ `OPENAI_MODEL`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à API –∫–ª—é—á –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –æ–±—Ä–∞–Ω–æ—ó –º–æ–¥–µ–ª—ñ

